<!DOCTYPE html>
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>Can't Believe I met youuuuu a year back Riiiiiiiüíó</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link type="text/css" rel="stylesheet" href="./file/default.css">
    <script type="text/javascript" src="./file/jquery.min.js"></script>
    <script type="text/javascript" src="./file/jscex.min.js"></script>
    <script type="text/javascript" src="./file/jscex-parser.js"></script>
    <script type="text/javascript" src="./file/jscex-jit.js"></script>
    <script type="text/javascript" src="./file/jscex-builderbase.min.js"></script>
    <script type="text/javascript" src="./file/jscex-async.min.js"></script>
    <script type="text/javascript" src="./file/jscex-async-powerpack.min.js"></script>
    <script type="text/javascript" src="./file/functions.js" charset="utf-8"></script>
    <script type="text/javascript" src="./file/love.js" charset="utf-8"></script>
    <style>
        #clock-box {
            text-align: center;
            font-size: 1.4em;
            font-weight: bold;
            color: #d24b4b;
            padding: 15px 10px;
            font-family: 'Arial', sans-serif;
        }

        @media only screen and (max-width: 600px) {
            canvas {
                width: 100% !important;
                height: auto !important;
            }

            #text {
                padding: 10px;
                font-size: 1em;
            }

            #code {
                word-break: break-word;
            }

            #clock-box {
                font-size: 1.2em;
            }
        }
    </style>
</head>
<body>
    <div id="main">
        <div id="wrap">
            <div id="text">
                <div id="code">
                    <span class="say">Sooo It's Been A Year Now , We had moments, fights and everything but beyond that we're still here >"<</span><br>
                    <span class="say">How Embarassing, I'm putting efforts like it's an anniversary, though I feel like It's a small one ^_^</span><br>
                    <span class="say">I hope we will still be like this and possibly more than this in near future üçÄ</span><br>
                    <span class="say">You deserve more happiness than anyone üíï</span><br>
                    <span class="say">I love you ‚ù§Ô∏è</span><br>
                    <span class="say">And I will always love u ‚ù§(‚Äæ‚ó°‚óù)</span><br>
                    <span class="say">I hope you the best ‚ù§Ô∏è</span><br>
                </div>
            </div>

            <div id="clock-box">
                <span id="clock">Loading days...</span>
            </div>

            <canvas id="canvas" width="1100" height="680"></canvas>
        </div>
    </div>

    <script>
    // Clock logic from May 30
    function updateDaysCounter() {
        const startDate = new Date("2024-05-30T00:00:00");
        const now = new Date();
        const diffTime = now - startDate;
        const diffDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        document.getElementById("clock").innerText = `${diffDays} days of nonstop talking and counting‚Ä¶ ‚ù§Ô∏è`;
    }

    updateDaysCounter();
    setInterval(updateDaysCounter, 1000 * 60 * 60); // Update every hour
    </script>

    <script>
    (function() {
        var canvas = $('#canvas');
        if (!canvas[0].getContext) {
            return false;
        }

        var width = canvas.width();
        var height = canvas.height();        
        canvas.attr("width", width);
        canvas.attr("height", height);

        var opts = {
            seed: {
                x: width / 2 - 20,
                color: "rgb(190, 26, 37)",
                scale: 2
            },
            branch: [/* same as before */],
            bloom: {
                num: 700,
                width: 1080,
                height: 650,
            },
            footer: {
                width: 1200,
                height: 5,
                speed: 10,
            }
        }

        var tree = new Tree(canvas[0], width, height, opts);
        var seed = tree.seed;
        var foot = tree.footer;
        var hold = 1;

        canvas.click(function(e) {
            var offset = canvas.offset(), x = e.pageX - offset.left, y = e.pageY - offset.top;
            if (seed.hover(x, y)) {
                hold = 0; 
                canvas.unbind("click");
                canvas.unbind("mousemove");
                canvas.removeClass('hand');
            }
        }).mousemove(function(e) {
            var offset = canvas.offset(), x = e.pageX - offset.left, y = e.pageY - offset.top;
            canvas.toggleClass('hand', seed.hover(x, y));
        });

        var seedAnimate = eval(Jscex.compile("async", function () {
            seed.draw();
            while (hold) { $await(Jscex.Async.sleep(10)); }
            while (seed.canScale()) { seed.scale(0.95); $await(Jscex.Async.sleep(10)); }
            while (seed.canMove()) { seed.move(0, 2); foot.draw(); $await(Jscex.Async.sleep(10)); }
        }));

        var growAnimate = eval(Jscex.compile("async", function () {
            do { tree.grow(); $await(Jscex.Async.sleep(10)); } while (tree.canGrow());
        }));

        var flowAnimate = eval(Jscex.compile("async", function () {
            do { tree.flower(2); $await(Jscex.Async.sleep(10)); } while (tree.canFlower());
        }));

        var moveAnimate = eval(Jscex.compile("async", function () {
    tree.snapshot("p1", 240, 0, 610, 680);
    while (tree.move("p1", 500, 0)) { foot.draw(); $await(Jscex.Async.sleep(10)); }
    foot.draw();
    // Removed background overwrite to keep the tree visible
}));
        var textAnimate = eval(Jscex.compile("async", function () {
            $("#code").show().typewriter();
        }));
	    
        var runAsync = eval(Jscex.compile("async", function () {
            $await(seedAnimate());
            $await(growAnimate());
            $await(flowAnimate());
            $await(moveAnimate());
            textAnimate().start();
        }));

        runAsync().start();
    })();
    </script>
</body>
</html>

